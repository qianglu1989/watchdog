webpackJsonp([13],{jaCM:function(t,e){},sibU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mtWM"),o=a.n(i),n={addClusterConfig:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/kafka/addClustrInfo";return o.a.get(e,{params:t})},addmonitor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/kafka/addmonitor";return o.a.get(e,{params:t})},getMonitorDatas:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/kafka/getMonitorDatas";return o.a.get(e,{params:t})},getTopics:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/kafka/getKafkaClusterInfo";return o.a.get(e,{params:t})},getTopicPartitionInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/kafka/describeTopics";return o.a.get(e,{params:t})},delCluster:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/kafka/deleteCluster";return o.a.get(e,{params:t})},delMonitor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/kafka/delMonitor";return o.a.get(e,{params:t})}},s=a("XhSL"),l=(a("4UDB"),a("Vb+l"),a("wQkr"),a("80cc"),a("Oq2I"),a("YsUA"),a("miEh"),{name:"home",data:function(){return{topicChartLoading:!1,topicDataLoading:!1,chartData:{tooltip:{trigger:"axis"},title:{text:"Week Data"},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},dataZoom:[{type:"slider",start:0,end:100}],xAxis:{type:"category",data:[]},yAxis:{type:"value"},series:[{data:[],type:"line",smooth:!0}]},activeName:"first",dialogVisible:!1,dialogMonitorVisible:!1,topicDialogVisible:!1,monitorData:[],kafka:{name:"",hosts:""},monitor:{name:"",groupId:"",topics:"",limit:""},topicDetail:[],topicOffset:[],currTab:"1",currRow:{},homeList:[],topList:[],hosts:[],topics:[],cif:[],ip:"",chartLoading:!1,tableData:[]}},methods:{getClusterInfo:function(){var t=this;return n.getClusterInfo({host:this.ip}).then(function(e){t.form.used_memory=e.data.used_memory,t.form.keys=e.data.keys,t.form.connected_clients=e.data.connected_clients,t.form.expires=e.data.expires,t.form.ops=e.data.ops,t.form.uptime=e.data.uptime})},changegeip:function(){this.getTopics()},getTopics:function(){var t=this;n.getTopics({clusterName:this.ip}).then(function(e){t.cif=e.data.nodes,t.tableData=e.data.topics,t.$notify.success({title:"获取TOPICS数据",content:"SUCC"})}).catch(function(e){t.$message.error("获取TOPICS数据失败"+e.toString())})},add:function(){this.dialogVisible=!0},addMonitor:function(){this.dialogMonitorVisible=!0},addMonitorData:function(){var t=this;n.addmonitor({clusterName:this.ip,groupId:this.monitor.groupId,topics:this.monitor.topics,limit:this.monitor.limit}).then(function(e){t.dialogMonitorVisible=!1,t.$notify.success({title:"添加阈值报警成功",content:"SUCC"})}).catch(function(e){t.$message.error("添加阈值报警失败"+e.toString())})},getMonitorDatas:function(){var t=this;this.topicDialogVisible=!0,n.getMonitorDatas({}).then(function(e){t.monitorData=e.data,t.$notify.success({title:"查询阈值报警成功",content:"SUCC"})}).catch(function(e){t.$message.error("查询阈值报警失败"+e.toString())})},close:function(){this.dialogVisible=!1,this.topicDialogVisible=!1,this.dialogMonitorVisible=!1},editData:function(){var t=this;n.addClusterConfig({name:this.kafka.name,bootStrap:this.kafka.hosts}).then(function(e){t.dialogVisible=!1,t.$notify.success({title:"添加",content:"SUCC"})}).catch(function(e){t.$message.error("操作失败"+e.toString())})},getClusterinfo:function(){var t=this;this.axios.get("/kafka/getClustrInfo").then(function(e){t.hosts=e.data})},delCluster:function(){var t=this;this.$confirm(" 此操作将删除当前 [ "+this.ip+" ] 集群监控, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.delCluster({name:t.ip}),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"取消删除"})})},delMonitor:function(t){var e=this;this.$confirm(" 此操作将删除当前 [ "+t.topics+" ] 阈值报警, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.delMonitor({clusterName:t.clusterName,groupId:t.groupId}),e.topicDialogVisible=!1,e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"取消删除"})})},getTopicPartitionInfo:function(t){var e=this;n.getTopicPartitionInfo({clusterName:this.ip,topic:t}).then(function(t){e.topicDialogVisible=!0,e.topicDetail=t.data.partitions,e.topicOffset=t.data.offset,e.$notify.success({title:"查询分片信息",content:"SUCC"})}).catch(function(t){e.$message.error("操作失败"+t.toString())})},topicChart:function(t){this.loadChart(t),this.topicDataLoading=!0},loadChart:function(t){var e=this;this.topicChartLoading=!0,this.axios.get("/kafka/getChartByTopic",{params:{clusterName:this.ip,topic:t.topic}}).then(function(t){e.chartData.xAxis.data=t.data.yaxis,e.chartData.title.text=t.data.name,e.chartData.series=[{data:t.data.xaxis,type:"line",smooth:!0}]}).finally(function(){e.topicChartLoading=!1})}},computed:{},mounted:function(){this.getClusterinfo()},components:{IEcharts:s.a}}),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{background:"#F2F6FC",padding:"10px"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"cluster profile",filterable:""},on:{change:t.changegeip},model:{value:t.ip,callback:function(e){t.ip=e},expression:"ip"}},t._l(t.hosts,function(t){return a("el-option",{key:t,attrs:{value:t,label:t}})}))],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.add()}}},[t._v("添加集群")])],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"success"},on:{click:function(e){t.getTopics()}}},[t._v("刷新数据")])],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.delCluster()}}},[t._v("删除集群")])],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addMonitor()}}},[t._v("添加报警")])],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getMonitorDatas()}}},[t._v("查看报警阈值")])],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("el-dialog",{attrs:{title:"添加集群",visible:t.dialogVisible,width:"60%","before-close":t.close},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[a("el-form",{ref:"kafka",attrs:{model:t.kafka,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"集群名称:"}},[a("el-input",{model:{value:t.kafka.name,callback:function(e){t.$set(t.kafka,"name",e)},expression:"kafka.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"hosts:"}},[a("el-input",{model:{value:t.kafka.hosts,callback:function(e){t.$set(t.kafka,"hosts",e)},expression:"kafka.hosts"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editData}},[t._v("添加")])],1)])],1)]),t._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("el-dialog",{attrs:{title:"添加Topic阈值报警",visible:t.dialogMonitorVisible,width:"60%","before-close":t.close},on:{"update:visible":function(e){t.dialogMonitorVisible=e}}},[a("span",[a("el-form",{ref:"monitor",attrs:{model:t.monitor,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"groupId:"}},[a("el-input",{attrs:{placeholder:"消费组groupId, 这个值就是应用的consumer groupId"},model:{value:t.monitor.groupId,callback:function(e){t.$set(t.monitor,"groupId",e)},expression:"monitor.groupId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"topics:"}},[a("el-input",{attrs:{placeholder:"要监控的topics,多个topic 使用 , 号分割"},model:{value:t.monitor.topics,callback:function(e){t.$set(t.monitor,"topics",e)},expression:"monitor.topics"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"limit:"}},[a("el-input",{attrs:{placeholder:"报警阈值"},model:{value:t.monitor.limit,callback:function(e){t.$set(t.monitor,"limit",e)},expression:"monitor.limit"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogMonitorVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addMonitorData}},[t._v("添加")])],1)])],1)])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{background:"#F2F6FC",padding:"5px"}},[a("el-card",{staticClass:"box-card",staticStyle:{background:"#FBFDFF"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("CLUSTER INFO")])]),t._v(" "),t._l(t.cif,function(e){return a("el-button",{key:e},[t._v("  "+t._s("节点: "+e))])})],2)],1)])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{background:"#F2F6FC",padding:"5px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",size:"mini"},on:{"row-click":t.topicChart}},[a("el-table-column",{attrs:{"header-align":"left",prop:"date",label:"TOPICS",width:"180"}},[a("el-table-column",{attrs:{"header-align":"center",prop:"topic",label:"Topic",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",prop:"partCount",label:"Partitions",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",prop:"brokerCount",label:"Brokers",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",prop:"replicaCount",label:"Replicas",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",prop:"offset",sortable:"",label:"offset"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",prop:"offsetLag",sortable:"",label:"offsetLag"}})],1)],1)],1)]),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-dialog",{attrs:{title:"报警阈值查询",visible:t.topicDialogVisible,width:"70%","before-close":t.close},on:{"update:visible":function(e){t.topicDialogVisible=e}}},[a("div",{staticStyle:{background:"#F2F6FC",padding:"5px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.monitorData,stripe:"",size:"mini"}},[a("el-table-column",{attrs:{"header-align":"center",prop:"clusterName",label:"ClusterName",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",prop:"topics",label:"Topics",sortable:"",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",prop:"groupId",label:"GroupId",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",prop:"limit",label:"Limit",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.delMonitor(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("el-button",{on:{click:function(e){t.topicDialogVisible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{background:"#F2F6FC",padding:"10px"}},[a("el-dialog",{attrs:{visible:t.topicDataLoading,width:"80%"},on:{"update:visible":function(e){t.topicDataLoading=e}}},[a("i-echarts",{staticStyle:{width:"100%",height:"500px"},attrs:{option:t.chartData,loading:t.topicChartLoading}})],1)],1)])],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,r,!1,function(t){a("jaCM")},"data-v-7aed53a5",null);e.default=c.exports}});
//# sourceMappingURL=13.90d0d01ccc53301b87ec.js.map