webpackJsonp([17],{Ojs6:function(t,e){},Ri7u:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("mtWM"),n=a.n(o),i=a("lbHh"),r=a.n(i),l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"version/getVersionList";return n.a.defaults.headers.common.project=window.localStorage.getItem("pjValue"),n.a.defaults.headers.common.profile=window.localStorage.getItem("prValue"),n.a.get(t,{params:{token:r.a.get("token")}})},s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"version/addVersionConfig";return n.a.defaults.headers.common.project=window.localStorage.getItem("pjValue"),n.a.defaults.headers.common.profile=window.localStorage.getItem("prValue"),t.token=r.a.get("token"),n.a.get(e,{params:t})},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"version/checkVersion";return n.a.defaults.headers.common.project=window.localStorage.getItem("pjValue"),n.a.defaults.headers.common.profile=window.localStorage.getItem("prValue"),t.token=r.a.get("token"),n.a.get(e,{params:t})},d={name:"appManage",data:function(){return{searchKey:"",dialogVisible:!1,dataList:[],loading:!1,form:{name:"",gitUrl:""}}},methods:{handleClose:function(){this.dialogVisible=!1},handleEdit:function(t,e){this.dialogVisible=!0,this.form.name=e.name,this.form.gitUrl=e.gitUrl,console.log(t,e)},refreshVersion:function(t,e){var a=this;this.loading=!0,this.form.name=e.name,this.form.gitUrl=e.gitUrl,console.log(t,e),c({name:this.form.name,gitUrl:this.form.gitUrl}).then(function(t){a.$notify.success({title:"检测完成",content:"SUCC"}),a.getVersions(),a.loading=!1}).catch(function(t){console.log(t),a.loading=!1,a.$message.error("操作失败,请检查是否有此功能权限"+t.toString())})},editData:function(){var t=this;s({name:this.form.name,gitUrl:this.form.gitUrl}).then(function(e){console.log(e),t.dialogVisible=!1,t.$notify.success({title:"修改成功",content:"SUCC"})}).catch(function(e){t.loading=!1,t.$message.error("操作失败,请检查是否有此功能权限"+e.toString())})},getVersions:function(){var t=this;l().then(function(e){console.log(e.data),t.dataList=e.data}).catch(function(e){console.log(e),t.$message.error("请求失败，请联系程序猿改BUG!"+e.toString())})}},mounted:function(){this.getVersions()},computed:{filteredList:function(){var t=this;return this.dataList.filter(function(e){return e.name.includes(t.searchKey)})||[]}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("el-input",{attrs:{placeholder:"请输入过滤条件"},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1)]),t._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"grid-content bg-purple-dark",staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getVersions()}}},[t._v("刷新数据")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.refreshVersion("","")}}},[t._v("检测全部版本")])],1)]),t._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark",attrs:{id:"gather-data-form"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.filteredList,width:"100%",align:"right",stripe:!0,"header-align":"right","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"应用名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"appversion",label:"应用版本"}}),t._v(" "),a("el-table-column",{attrs:{prop:"parent",label:"parent"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"检测时间"}})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("el-dialog",{attrs:{title:"版本信息",visible:t.dialogVisible,width:"60%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"应用名称:"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"检测地址:"}},[a("el-input",{model:{value:t.form.gitUrl,callback:function(e){t.$set(t.form,"gitUrl",e)},expression:"form.gitUrl"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editData}},[t._v("添加/更新")])],1)])],1)])],1)},staticRenderFns:[]};var m=a("VU/8")(d,g,!1,function(t){a("Ojs6")},"data-v-5603b098",null);e.default=m.exports}});
//# sourceMappingURL=17.db7fe694161a000b2318.js.map