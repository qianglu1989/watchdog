webpackJsonp([19],{"/OqR":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("XhSL"),l=(a("4UDB"),a("wQkr"),a("Oq2I"),{name:"statusChart",components:{IEcharts:o.a},data:function(){return{dialogVisible:!1,date:"",type:"0",service:"",serviceOption:[],clazz:"",clazzOption:[],method:"",methodOption:[],chartData:[],typeData:[{value:"0",label:"一小时"},{value:"1",label:"一天"},{value:"2",label:"一周"}]}},methods:{handleEdit:function(){this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},addChart:function(){var e=this,t=this.service+":"+this.clazz+":"+this.method;this.axios.defaults.headers.common.project=window.localStorage.getItem("pjValue"),this.axios.defaults.headers.common.profile=window.localStorage.getItem("prValue"),this.axios.get("/chart/addChartData",{params:{chartName:t}}).then(function(a){console.log(a),e.getData(),e.$notify.success({title:"Chart Added",content:t+" added successfully"}),e.dialogVisible=!1})},delChart:function(e,t){var a=this,o=this.chartData.splice(t,1)[0];console.log(o),this.axios.defaults.headers.common.project=window.localStorage.getItem("pjValue"),this.axios.defaults.headers.common.profile=window.localStorage.getItem("prValue"),this.axios.get("/chart/deleteChartData",{params:{chartName:o.name}}).then(function(e){console.log(e),a.$notify.success({title:"Chart Deleted",content:o.name+" deleted successfully"}),a.getData()})},serviceChange:function(e){var t=this;this.clazzOption=[],this.axios.defaults.headers.common.project=window.localStorage.getItem("pjValue"),this.axios.defaults.headers.common.profile=window.localStorage.getItem("prValue"),this.axios.get("/chart/getBaseData",{params:{type:1,serviceName:e}}).then(function(e){console.log(e),t.clazzOption=e.data})},clazzChange:function(e){var t=this;this.methodOption=[],this.axios.defaults.headers.common.project=window.localStorage.getItem("pjValue"),this.axios.defaults.headers.common.profile=window.localStorage.getItem("prValue"),this.axios.get("/chart/getBaseData",{params:{type:2,serviceName:this.service,clazz:e}}).then(function(e){console.log(e),t.methodOption=e.data})},methodChange:function(){},getData:function(){var e=this;this.axios.defaults.headers.common.project=window.localStorage.getItem("pjValue"),this.axios.defaults.headers.common.profile=window.localStorage.getItem("prValue"),this.axios.get("/chart/getChartData",{params:{type:this.type,date:this.date}}).then(function(t){console.log(t),e.chartData=t.data.map(function(e){return{name:e.name,data:{tooltip:{trigger:"axis"},xAxis:{data:e.xaxis},yAxis:{},dataZoom:[{type:"slider",start:0,end:100}],series:[{type:"line",data:e.yaxis}]},loading:!1}})})}},mounted:function(){var e=this;this.axios.defaults.headers.common.project=window.localStorage.getItem("pjValue"),this.axios.defaults.headers.common.profile=window.localStorage.getItem("prValue"),this.axios.get("/chart/getBaseData",{params:{type:0}}).then(function(t){console.log(t),e.serviceOption=t.data,console.log(e.serviceOption)}),this.getData()}}),i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy MM dd ","value-format":"yyyyMMdd"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)]),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-select",{attrs:{placeholder:"默认查询一小时数据",filterable:""},on:{change:e.getData},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeData,function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),e._v(" "),a("el-button",{on:{click:e.getData}},[e._v("刷新数据")])],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"grid-content bg-purple-dark",staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleEdit("","")}}},[e._v("添加图表")])],1)]),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("el-dialog",{attrs:{title:"添加图表",visible:e.dialogVisible,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("el-select",{attrs:{placeholder:"Service",filterable:""},on:{change:e.serviceChange},model:{value:e.service,callback:function(t){e.service=t},expression:"service"}},e._l(e.serviceOption,function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),e._v(" "),a("el-select",{attrs:{placeholder:"Class",filterable:""},on:{change:e.clazzChange},model:{value:e.clazz,callback:function(t){e.clazz=t},expression:"clazz"}},e._l(e.clazzOption,function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),e._v(" "),a("el-select",{attrs:{placeholder:"Method",filterable:""},on:{change:e.methodChange},model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},e._l(e.methodOption,function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),e._v(" "),a("el-button",{on:{click:e.addChart}},[e._v("添加图表")])],1)])],1)]),e._v(" "),a("el-col",[a("div",{staticClass:"data"},[a("div",{staticClass:"chart-container"},e._l(e.chartData,function(t,o){return a("div",{key:t.name,staticClass:"chart-item"},[a("i-echarts",{attrs:{option:t.data,loading:t.loading}}),e._v(" "),a("div",[a("i",{staticClass:"el-icon-circle-close",staticStyle:{"margin-right":"5px"},on:{click:function(a){e.delChart(t,o)}}}),a("span",[e._v(e._s(t.name))])])],1)}))])])],1)},staticRenderFns:[]};var s=a("VU/8")(l,i,!1,function(e){a("DD1O")},"data-v-40c07024",null);t.default=s.exports},DD1O:function(e,t){}});
//# sourceMappingURL=19.9a03179d29e781a362e8.js.map